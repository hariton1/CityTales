<div class="place-detail-container">
  <div class="place-detail-card">
    <!-- Header with building information -->
    <div class="place-detail-header">
      <h2 class="place-detail-title">{{selectedPerson.name}}</h2>
      <div *ngIf="funFact" class="fun-fact-card tui-space_bottom-3">
        <tui-icon icon="@tui.star" [style.height.rem]="1.2" class="mr-2"></tui-icon>
        <strong>Fun Fact:</strong> {{ funFact.fact }}
        <span *ngIf="funFact.score">&nbsp;(Score: {{ funFact.score }})</span>
        <button
          tuiButton
          appearance="outline"
          size="s"
          class="tui-space_left-3"
          (click)="saveFunFact()"
          [disabled]="funFactSaved"
        >
          <tui-icon icon="@tui.heart" [style.height.rem]="1.1" class="mr-1"></tui-icon>
          <span *ngIf="!funFactSaved">Merken</span>
          <span *ngIf="funFactSaved">Gespeichert!</span>
        </button>
      </div>
      <div class="place-location">
        <span class="coordinates" *ngIf="selectedPerson.birthDate != null">
          *{{ selectedPerson.birthDate }}
        </span>
        <span class="coordinates" *ngIf="selectedPerson.deathDate != null">
          â€ {{ selectedPerson.deathDate }}
        </span>
      </div>


      <button
        (click)="closeDetail()"
      > Close </button>


    </div>


    <!-- Main content -->
    <tui-scrollbar class="scrollable-content">
      <div class="place-detail-content">
        <div class="content-section">
          <h3>Description</h3>
          <p>{{ selectedPerson.contentGerman }}</p>
        </div>

        <div>
          <button class="feedback-button" appearance="secondary" size="m" tuiButton type="button" (click)="navigateToFeedback()">
            <tui-icon icon="@tui.message-circle-plus" [style.height.rem]="1"/> Give us feedback
          </button>
        </div>

        <div class="content-section">
          <h3>Person Information</h3>
          <div class="building-details">
            <div class="detail-row" *ngIf="selectedPerson.name">
              <span class="label">Name:</span>
              <span class="value">{{ selectedPerson.name }}</span>
            </div>
            <div class="detail-row" *ngIf="selectedPerson.jobs">
              <span class="label">Jobs:</span>
              <span class="value">{{ selectedPerson.jobs }}</span>
            </div>
            <div class="detail-row" *ngIf="selectedPerson.sex">
              <span class="label">Sex:</span>
              <span class="value">{{ selectedPerson.sex }}</span>
            </div>
            <div class="detail-row" *ngIf="selectedPerson.birthPlace">
              <span class="label">Birth Place:</span>
              <span class="value">{{ selectedPerson.birthPlace }}</span>
            </div>
            <div class="detail-row" *ngIf="selectedPerson.deathPlace">
              <span class="label">Death Place:</span>
              <span class="value">{{ selectedPerson.deathPlace }}</span>
            </div>
            <div class="detail-row" *ngIf="selectedPerson.imageUrls.length > 0">
              <img [src]="selectedPerson.imageUrls[0]" alt="Building image" class="building-image">
            </div>
            <div class="detail-row" *ngIf="selectedPerson.url">
              <span class="label">Wiki URL:</span>
              <span class="value">
              <a [href]="selectedPerson.url" target="_blank"> {{ selectedPerson.url }} </a>
            </span>
            </div>

            <div class="content-section" *ngIf="selectedPerson.relatedPersons?.length">
              <h3>Related Persons</h3>
              <div class="related-items">
                <div class="related-item" *ngFor="let person of selectedPerson.relatedPersons">
            <span class="value">
              <div (click)="onPersonClick(person)">
                <span>{{ person.name }}</span>
              </div>
            </span>
                </div>
              </div>
            </div>

            <div class="content-section" *ngIf="selectedPerson.relatedBuildings?.length">
              <h3>Related Places</h3>
              <div class="related-items">
                <div class="related-item" *ngFor="let place of selectedPerson.relatedBuildings">
            <span class="value">
              <div (click)="onBuildingClick(place)">
                <span>{{ place.name }}</span>
              </div>
            </span>
                </div>
              </div>
            </div>

            <div class="content-section" *ngIf="selectedPerson.relatedEvents?.length">
              <h3>Related Events</h3>
              <div class="related-items">
                <div class="related-item" *ngFor="let event of selectedPerson.relatedEvents">
            <span class="value">
              <div (click)="onEventClick(event)">
                <span>{{ event.name }}</span>
              </div>
            </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </tui-scrollbar>
  </div>
</div>

